---
title: "[System Programming] 5장 프로세스의 생성과 소멸"
date: '2024-08-08'
---
## 프로세스의 이해
### 프로세스란 무엇인가?
프로세스란 실행 중에 있는 프로그램을 의미한다.

예를 들어, 벽돌깨기 게임이 하드에 저장되어 있고, 이 실행 파일 이름을 block.exe라 한다면 
이를 프로그램이라 한다.

이제 이를 클릭하면, 메모리 할당이 일어나고, 메모리 공간으로 해당 파일의 바이너리 코드가 올라가게 된다. 이제부턴 이를 프로세스라 한다.

### 프로세스를 구성하는 요소
`Execution of "C" Program`
![alt text](image-22.png)
프로그램이 실행될 때 구성되는 메모리 공간

실행 파일 내에 존재하는 명령어들이 메모리상에 올라가서 순차적으로 실행된다. 이렇게 실행 파일을 구성하는 명령어들이 올라가는 메모리 영역을 Code영역이라 한다.

위와 같은 메모리 공간의 구성을 통틀어 실행 중인 프로세스의 실체라 할 수 있다.
그리고 실행되고 있는 프로세스 개수 만큼 생성된다.

`Resister Set`
프로세스의 구성하는 요소로 더불어 생각해야할 것은 cpu내의 레지스터이다. 프로그램의 실행을 위해 레지스터는 필수불가결하다.

어떤 프로그램을 실행 중이라면 cpu를 구성하는 레지스터들은 해당 실행을 위한 필요한 데이터들로 채워지게 된다. 따라서 레지스터들의 상태까지도 프로세스의 일부로 포함시킬 수 있다.

* 프로세스 = 구성되는 메모리 공간 + 프로그램의 데이터로 채워진 레지스터 셋

## 프로세스의 스케줄링과 상태 변화
### 프로세스의 스케줄링(Scheduling)
cpu는 하나인데 동시에 여러 프로세스가 실행된다. 

이는 cpu는 아주 빠르기 때문에 하나의 cpu가 여러 프로세스를 고속으로 번갈아 가며 실행 시킬 경우, 동시에 여러 개의 프로그램을 실행시킨다고 느껴지게 된다.

이때, 여러 개의 프로세스들이 cpu 할당 시간을 나누게 된다.

`스케줄링의 기본 원리`
![alt text](image-23.png)
여러개의 프로세스가 동시에 실행되어야 한다고 가정해보자. 어떠한 기준으로 cpu를 할당해주어야 할까?

이렇게 프로세스의 cpu할당 순서 및 방법을 결정짓는 일을 가리켜 스케줄링이라 한다. 이때 사용되는 알고리즘을 가리켜 스케줄링 알고리즘이라고 한다. 또한 이를 적용시켜 실제로 프로세스를 관리하는 운영체제 요소(모듈)을 가리켜 스케줄러라고 한다.

스케줄러는 어떤 하드한 장치가 아니라 일종의 소프트웨어로써, 운영체제를 구성하는 중요한 요소 중에 하나이다.

`멀티 프로세스는 cpu를 바쁘게 한다.`
우리가 실행해야 할 프로세스 a,b,c가 있다고 가정해보자. 이 프로세스 들이 실행되는 형태를 두가지로 볼 수 있다.

첫째로 고전적인 방식으로 a를 실행, a가 끝나면 b를 실행하는 식이다.

둘째로 멀티 프로세스 운영체제의 방식으로 a,b,c를 모두 실행시킨 후 스케줄러에 의해 관리되도록 하는 것이다.

일반적으로 프로그램이 실행되는 과정에서 많은 시간이 할당되는 경우는 언제일까? 보통 I/O일 것이다.

비단 파일이나 키보드 등의 입출력 말고도 네트워크 상에서의 송수신 과정도 I/O에 해당된다.

이러한 I/O과정에서, 즉 홈페이지에 접속하여 로딩하는 동안 컴퓨터의 모든 프로세스가 동작을 멈춘다면 얼마나 시스템 자원적으로 낭비가 클 까?

이러한 측면에서 고전적인 방식보단 멀티 프로세스 기반으로 프로세스를 처리하는 것이 훨씬 효율적일 것이다.

### 프로세스의 상태 변화
![alt text](image-24.png)
멀티 프로세스 운영체제에서 프로세스 각각의 상태는 시간흐름에 따라 변화한다.

`상황 1 : S(Start) 에서 Ready 상태로의 전이를 보여준다.`

`상황 2: Ready 상태에서 Running 상태로의 전이를 보여준다.`

`상황 3 : Running 상태에서 Ready 상태로의 전이를 보여준다.`


프로세스의 상태 변화, 시나리오로 다시 이해하기
컨텍스트 스위칭(Context Switching)
프로세스의 생성
프로세스의 생성
CreateProcess 함수의 이해
예제를 통한 CreateProcess 함수의 이해
실습을 위한 환경의 구성 및 실행
프로세스 생성과 관련된 예제 그리고 문제점
명령 프롬프트 프로젝트 기능 추가

### 이미지 출처
https://github.com/connieya/system_programming